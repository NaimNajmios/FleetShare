<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/admin-layout}" th:with="activePage='reports', pageTitle='Standard Report Builder'">

<head>
    <th:block layout:fragment="extra-css">
        <style>
            .report-category-card {
                border-radius: 12px;
                padding: 1.25rem;
                cursor: pointer;
                transition: all 0.3s ease;
                border: 2px solid transparent;
                text-align: center;
            }

            .report-category-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            }

            .report-category-card.active {
                border-color: white;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }

            .report-category-card .category-icon {
                font-size: 2.5rem;
                margin-bottom: 0.5rem;
                display: block;
            }

            .report-category-card .category-label {
                font-size: 0.9rem;
                font-weight: 600;
            }

            .cat-booking {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
            }

            .cat-vehicle {
                background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
                color: white;
            }

            .cat-payment {
                background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
                color: white;
            }

            .cat-maintenance {
                background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
                color: white;
            }

            .cat-user {
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                color: white;
            }

            .config-section {
                background: #f8f9fa;
                padding: 1.5rem;
                border-radius: 0.75rem;
            }

            .config-label {
                display: block;
                font-weight: 600;
                color: #495057;
                margin-bottom: 0.5rem;
                font-size: 0.875rem;
            }

            .duration-pills {
                display: flex;
                gap: 0.5rem;
                flex-wrap: wrap;
                margin-bottom: 1rem;
            }

            .duration-pill {
                padding: 0.5rem 1rem;
                border: 1px solid #dee2e6;
                border-radius: 2rem;
                background: white;
                cursor: pointer;
                font-size: 0.875rem;
                transition: all 0.2s ease;
            }

            .duration-pill:hover {
                border-color: var(--bs-primary);
                color: var(--bs-primary);
            }

            .duration-pill.active {
                background: var(--bs-primary);
                border-color: var(--bs-primary);
                color: white;
            }

            .duration-pill input {
                display: none;
            }

            .btn-generate {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 0.75rem 2rem;
                border: none;
                border-radius: 0.5rem;
                font-weight: 600;
                cursor: pointer;
            }

            .btn-generate:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            }

            .report-type-card {
                padding: 1rem;
                border: 1px solid #e0e0e0;
                border-radius: 0.5rem;
                cursor: pointer;
                transition: all 0.2s ease;
                margin-bottom: 0.5rem;
            }

            .report-type-card:hover {
                border-color: var(--bs-primary);
                background: #f8f9ff;
            }

            .report-type-card.selected {
                border-color: var(--bs-primary);
                background: #f0f4ff;
            }

            .report-type-card .report-name {
                font-weight: 600;
                color: #333;
            }

            .report-type-card .report-desc {
                font-size: 0.8rem;
                color: #6c757d;
                margin: 0;
            }
        </style>
    </th:block>
</head>

<body>
    <div layout:fragment="content">
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">
                    <div>
                        <h3 class="font-weight-bold mb-1">Report Builder</h3>
                        <p class="text-muted mb-0">Generate structured, parameter-based reports</p>
                    </div><a th:href="@{/admin/ai-reports}" class="btn btn-outline-primary"><i
                            class="mdi mdi-robot me-1"></i> Try AI Data Assistant</a>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-xl col-md-4 col-6 mb-3 mb-xl-0">
                <div class="report-category-card cat-booking active" data-category="booking"
                    onclick="selectCategory('booking', this)"><i class="mdi mdi-calendar-check category-icon"></i><span
                        class="category-label">Booking</span></div>
            </div>
            <div class="col-xl col-md-4 col-6 mb-3 mb-xl-0">
                <div class="report-category-card cat-vehicle" data-category="vehicle"
                    onclick="selectCategory('vehicle', this)"><i class="mdi mdi-car category-icon"></i><span
                        class="category-label">Vehicle</span></div>
            </div>
            <div class="col-xl col-md-4 col-6 mb-3 mb-xl-0">
                <div class="report-category-card cat-payment" data-category="payment"
                    onclick="selectCategory('payment', this)"><i class="mdi mdi-currency-usd category-icon"></i><span
                        class="category-label">Payment</span></div>
            </div>
            <div class="col-xl col-md-4 col-6 mb-3 mb-xl-0">
                <div class="report-category-card cat-maintenance" data-category="maintenance"
                    onclick="selectCategory('maintenance', this)"><i class="mdi mdi-wrench category-icon"></i><span
                        class="category-label">Maintenance</span></div>
            </div>
            <div class="col-xl col-md-4 col-6 mb-3 mb-xl-0">
                <div class="report-category-card cat-user" data-category="user" onclick="selectCategory('user', this)">
                    <i class="mdi mdi-account-group category-icon"></i><span class="category-label">User</span></div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-4 mb-4 mb-lg-0">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Report Templates</h5>
                        <div id="report-types-container">
                            <div class="report-type-card selected" data-report="monthly-revenue">
                                <div class="report-name">Monthly Revenue</div>
                                <p class="report-desc">Revenue breakdown by month</p>
                            </div>
                            <div class="report-type-card" data-report="utilization-rate">
                                <div class="report-name">Utilization Rate</div>
                                <p class="report-desc">Fleet utilization analysis</p>
                            </div>
                            <div class="report-type-card" data-report="booking-summary">
                                <div class="report-name">Booking Summary</div>
                                <p class="report-desc">All bookings overview</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title mb-3">Report Configuration</h5>
                        <div class="config-section mb-4">
                            <label class="config-label">Duration</label>
                            <div class="duration-pills">
                                <label class="duration-pill"><input type="radio" name="duration"
                                        value="today">Today</label>
                                <label class="duration-pill active"><input type="radio" name="duration" value="last7"
                                        checked>Last 7 Days</label>
                                <label class="duration-pill"><input type="radio" name="duration" value="thisMonth">This
                                    Month</label>
                                <label class="duration-pill"><input type="radio" name="duration" value="lastMonth">Last
                                    Month</label>
                                <label class="duration-pill"><input type="radio" name="duration" value="custom">Custom
                                    Range</label>
                            </div>
                            <div class="row date-range" style="display: none;">
                                <div class="col-md-6 mb-3 mb-md-0"><label class="config-label">Start Date</label><input
                                        type="date" class="form-control" id="start-date"></div>
                                <div class="col-md-6"><label class="config-label">End Date</label><input type="date"
                                        class="form-control" id="end-date"></div>
                            </div>
                        </div>
                        <div class="row mb-4">
                            <div class="col-md-6 mb-3 mb-md-0"><label class="config-label">Status Filter</label><select
                                    class="form-select" id="status-filter">
                                    <option value="">All Status</option>
                                    <option value="confirmed">Confirmed</option>
                                    <option value="completed">Completed</option>
                                    <option value="cancelled">Cancelled</option>
                                </select></div>
                            <div class="col-md-6"><label class="config-label">Owner</label><select class="form-select"
                                    id="owner-filter">
                                    <option value="">All Owners</option>
                                </select></div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="text-muted small"><i class="mdi mdi-information-outline me-1"></i>Reports will
                                be generated as PDF or Excel</div><button class="btn-generate"
                                onclick="generateReport()"><i class="mdi mdi-file-document"></i> Generate
                                Report</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <th:block layout:fragment="extra-js">
        <script>
            let currentCategory = 'booking', currentReport = 'monthly-revenue';
            const reportTemplates = { booking: [{ id: 'monthly-revenue', name: 'Monthly Revenue', desc: 'Revenue breakdown' }, { id: 'utilization-rate', name: 'Utilization Rate', desc: 'Fleet utilization' }, { id: 'booking-summary', name: 'Booking Summary', desc: 'All bookings' }], vehicle: [{ id: 'vehicle-performance', name: 'Vehicle Performance', desc: 'Metrics per vehicle' }, { id: 'fleet-status', name: 'Fleet Status', desc: 'Current status' }, { id: 'maintenance-due', name: 'Maintenance Due', desc: 'Upcoming maintenance' }], payment: [{ id: 'payment-summary', name: 'Payment Summary', desc: 'Transactions summary' }, { id: 'outstanding-payments', name: 'Outstanding Payments', desc: 'Pending payments' }, { id: 'revenue-analysis', name: 'Revenue Analysis', desc: 'Revenue breakdown' }], maintenance: [{ id: 'maintenance-history', name: 'Maintenance History', desc: 'Past records' }, { id: 'cost-analysis', name: 'Cost Analysis', desc: 'Cost breakdown' }, { id: 'upcoming-maintenance', name: 'Upcoming Maintenance', desc: 'Scheduled' }], user: [{ id: 'user-activity', name: 'User Activity', desc: 'Activity log' }, { id: 'top-customers', name: 'Top Customers', desc: 'Most active' }, { id: 'user-demographics', name: 'User Demographics', desc: 'Demographics' }] };
            function selectCategory(c, el) { currentCategory = c; document.querySelectorAll('.report-category-card').forEach(card => card.classList.remove('active')); el.classList.add('active'); const container = document.getElementById('report-types-container'); container.innerHTML = reportTemplates[c].map((t, i) => `<div class="report-type-card ${i === 0 ? 'selected' : ''}" data-report="${t.id}" onclick="selectReport('${t.id}', this)"><div class="report-name">${t.name}</div><p class="report-desc">${t.desc}</p></div>`).join(''); currentReport = reportTemplates[c][0].id; }
            function selectReport(r, el) { currentReport = r; document.querySelectorAll('.report-type-card').forEach(card => card.classList.remove('selected')); el.classList.add('selected'); }
            document.querySelectorAll('.duration-pill').forEach(pill => { pill.addEventListener('click', function () { document.querySelectorAll('.duration-pill').forEach(p => p.classList.remove('active')); this.classList.add('active'); document.querySelector('.date-range').style.display = this.querySelector('input').value === 'custom' ? 'flex' : 'none'; }); });
            function generateReport() { const duration = document.querySelector('.duration-pill.active input').value; alert(`Generating ${currentReport} for ${currentCategory}.\nDuration: ${duration}\n\nThis is a UI demo.`); }
        </script>
    </th:block>
</body>

</html>